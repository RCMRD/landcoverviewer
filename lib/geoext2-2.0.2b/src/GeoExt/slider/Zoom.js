Ext.define("GeoExt.slider.Zoom",{extend:"GeoExt.slider.MapPanelItem",requires:["GeoExt.panel.Map"],alias:"widget.gx_zoomslider",alternateClassName:"GeoExt.ZoomSlider",map:null,baseCls:"gx-zoomslider",aggressive:!1,updating:!1,zooming:!1,initComponent:function(){if(this.callParent(arguments),this.map&&(this.map instanceof GeoExt.MapPanel&&(this.map=this.map.map),this.bind(this.map)),this.aggressive===!0)this.on("change",this.changeHandler,this);else this.on("changecomplete",this.changeHandler,this);this.on("beforedestroy",this.unbind,this)},onRender:function(){this.callParent(arguments);this.el.addCls(this.baseCls)},afterRender:function(){this.callParent(arguments);this.update()},addToMapPanel:function(n){var t=this;t.callParent(arguments);t.on({afterrender:function(){t.bind(n.map)}})},bind:function(n){this.map=n;this.map.events.on({zoomend:this.update,changebaselayer:this.initZoomValues,scope:this});this.map.baseLayer&&(this.initZoomValues(),this.update())},unbind:function(){this.map&&this.map.events&&this.map.events.un({zoomend:this.update,changebaselayer:this.initZoomValues,scope:this})},initZoomValues:function(){var n=this.map.baseLayer;this.initialConfig.minValue===undefined&&(this.minValue=n.minZoomLevel||0);this.initialConfig.maxValue===undefined&&(this.maxValue=n.minZoomLevel==null?n.numZoomLevels-1:n.maxZoomLevel)},getZoom:function(){return this.getValue()},getScale:function(){return OpenLayers.Util.getScaleFromResolution(this.map.getResolutionForZoom(this.getValue()),this.map.getUnits())},getResolution:function(){return this.map.getResolutionForZoom(this.getValue())},changeHandler:function(){this.map&&!this.updating&&(this.zooming=!0,this.map.zoomTo(this.getValue()))},update:function(){this.rendered&&this.map&&!this.zooming&&(this.updating=!0,this.setValue(this.map.getZoom()),this.updating=!1);this.zooming=!1}})