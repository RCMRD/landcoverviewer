Ext.define("GeoExt.plugins.PrintPageField",{mixins:{observable:"Ext.util.Observable"},requires:["GeoExt.data.PrintPage","Ext.form.field.ComboBox","Ext.form.field.Checkbox"],alias:"widget.gx_printpagefield",alternateClassName:"GeoExt.PrintPageField",printPage:null,target:null,constructor:function(n){this.initialConfig=n;Ext.apply(this,n);this.callParent(arguments)},init:function(n){this.target=n;var t={beforedestroy:this.onBeforeDestroy,scope:this},i="change";n instanceof Ext.form.ComboBox&&(i="select");t[i]=this.onFieldChange;n.on(t);this.printPage.on({change:this.onPageChange,scope:this});this.printPage.printProvider.on({layoutchange:this.onLayoutChange,scope:this});this.setValue(this.printPage)},onFieldChange:function(n,t){var r,u,i;r=Ext.isArray(t)?t[0]:t;u=this.printPage.printProvider;i=n.getValue();this._updating=!0;n.store===u.scales||n.name==="scale"?this.printPage.setScale(r):n.name=="rotation"?isNaN(i)||this.printPage.setRotation(i):this.printPage.customParams[n.name]=i;delete this._updating},onPageChange:function(n){this._updating||this.setValue(n)},onLayoutChange:function(n,t){var i=this.target;i.name=="rotation"&&i.setDisabled(!t.get("rotation"))},setValue:function(n){var t=this.target;t.suspendEvents();t.store===n.printProvider.scales||t.name==="scale"?n.scale&&t.setValue(n.scale.get(t.displayField)):t.name=="rotation"&&t.setValue(n.rotation);t.resumeEvents()},onBeforeDestroy:function(){this.target.un("beforedestroy",this.onBeforeDestroy,this);this.target.un("select",this.onFieldChange,this);this.target.un("valid",this.onFieldChange,this);this.printPage.un("change",this.onPageChange,this);this.printPage.printProvider.un("layoutchange",this.onLayoutChange,this)}})