Ext.define("GeoExt.Lang",{extend:"Ext.util.Observable",singleton:!0,requires:["GeoExt.Version"],locale:navigator.language||navigator.userLanguage,dict:null,constructor:function(){this.addEvents("localize");this.dict={};this.callParent()},add:function(n,t){var r=this.dict[n],i;if(r)for(i in t)r[i]=Ext.apply(r[i]||{},t[i]);else this.dict[n]=Ext.apply({},t);n&&n!==this.locale?this.locale.indexOf(n+"-")===0&&this.set(this.locale):this.set(n)},set:function(n){for(var h=n?n.split("-"):[],u="",r={},f,t,s,i=0,e=h.length;i<e;++i)if(u+=(u&&"-"||"")+h[i],u in this.dict){f=this.dict[u];for(t in f)t in r?Ext.apply(r[t],f[t]):r[t]=Ext.apply({},f[t])}for(t in r){var o=window,c=t.split("."),l=!1;for(i=0,e=c.length;i<e;++i)if(s=c[i],s in o)o=o[s];else{l=!0;break}l||Ext.apply(o,r[t])}this.locale=n;this.fireEvent("localize",n)}})